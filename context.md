# AI 赋能 AkShare 智能筛股平台 —— 技术设计与实施方案

> 目标：构建一个**基于 AkShare 数据源 + AI 分析引擎 + Web 可视化前端 + Docker 容器化部署**的一体化智能筛股平台。用户通过浏览器访问本地或服务器端口，输入筛选条件或自然语言指令，即可获得股票筛选结果与可视化反馈。

---

## 一、项目定位与愿景

### 1.1 项目定位

本项目是一个面向**个人研究者 / 量化初学者 / 投资学习者**的：

> **AI + 金融数据 + 可视化 + 智能筛选 的综合平台**

核心不是“做一个脚本”，而是：

> **做一个可部署、可交互、可扩展的工程级系统**。

### 1.2 核心价值

| 维度 | 价值                      |
| -- | ----------------------- |
| 数据 | AkShare 提供全量、免费、结构化金融数据 |
| 智能 | AI 对筛选逻辑、策略组合、指标解释进行赋能  |
| 交互 | Web 前端可视化操作，而非命令行       |
| 架构 | Docker 一键部署，工程化可复用      |

---

## 二、总体系统架构

### 2.1 架构总览

系统采用**前后端分离 + AI Agent 调度 + 数据服务层**的三层结构：

```
┌─────────────────────────────┐
│         Web 前端 UI         │
│  (React / Vue / HTML)       │
└─────────────▲───────────────┘
              │ REST / WS
┌─────────────┴───────────────┐
│        后端 API 服务         │
│   (FastAPI / Flask)          │
│  - 请求解析                  │
│  - 参数校验                  │
│  - 任务调度                  │
└─────────────▲───────────────┘
              │
┌─────────────┴───────────────┐
│        AI Agent 层           │
│  - 策略生成 Agent            │
│  - 指标解释 Agent            │
│  - 组合优化 Agent            │
└─────────────▲───────────────┘
              │
┌─────────────┴───────────────┐
│       数据服务层             │
│   AkShare 数据接口           │
│   本地缓存 / 预处理          │
└─────────────────────────────┘
```

---

## 三、核心功能模块设计

### 3.1 股票数据获取模块（AkShare Layer）

**职责：**

* 统一封装 AkShare 接口
* 处理数据清洗、异常、格式统一
* 提供给上层标准化 DataFrame

**典型功能：**

| 功能   | AkShare 接口示例                       |
| ---- | ---------------------------------- |
| 实时行情 | stock_zh_a_spot_em                 |
| 历史K线 | stock_zh_a_hist                    |
| 财务指标 | stock_financial_analysis_indicator |
| 行业板块 | stock_board_industry_name_em       |

### 3.2 筛选引擎模块（Filter Engine）

支持两种筛选方式：

#### 1）规则式筛选

例如：

* 市盈率 < 30
* 净利润同比增长 > 20%
* ROE > 10%

#### 2）AI 语义筛选

例如用户输入：

> “帮我找最近三年业绩稳定增长、估值不高的消费股”

流程：

```
自然语言 → AI 解析 → 指标映射 → 构造筛选条件 → 执行筛选
```

---

### 3.3 AI Agent 设计

本项目建议至少设计三类 Agent：

| Agent             | 职责             |
| ----------------- | -------------- |
| Strategy Agent    | 将自然语言转为可执行筛选逻辑 |
| Analysis Agent    | 对筛选结果进行解读      |
| Explanation Agent | 向用户解释“为什么选这些股” |

**示例：**

用户输入：

> “给我一些低估值 + 高分红的股票”

AI 输出结构：

```json
{
  "filters": [
    {"field": "pe", "operator": "<", "value": 15},
    {"field": "dividend_yield", "operator": ">", "value": 0.03}
  ]
}
```

---

## 四、前端可视化设计

### 4.1 页面结构

| 页面  | 功能          |
| --- | ----------- |
| 首页  | 项目介绍 + 快速入口 |
| 筛选页 | 条件选择 / 文本输入 |
| 结果页 | 表格 + 图表展示   |
| 个股页 | 单只股票详细分析    |

### 4.2 关键组件

* 条件选择面板（多选框 / 滑块）
* 自然语言输入框
* 数据表格（支持排序 / 筛选）
* 图表（K线、柱状图、雷达图）

建议技术栈：

* React + Ant Design / Vue + Element Plus
* ECharts / Recharts 进行可视化

---

## 五、后端 API 设计

### 5.1 典型接口

| 方法   | 路径                | 说明       |
| ---- | ----------------- | -------- |
| POST | /api/filter       | 提交筛选条件   |
| POST | /api/ai_filter    | 提交自然语言筛选 |
| GET  | /api/stock/{code} | 获取个股详情   |

### 5.2 数据流示意

```
前端请求 → API 接收 → AI 解析 → AkShare 获取数据 → 筛选 → 返回结果
```

---

## 六、Docker 容器化部署设计

### 6.1 项目目录结构

```
ai-stock-platform/
├── backend/
│   ├── main.py
│   ├── ai_agents/
│   ├── services/
│   └── requirements.txt
├── frontend/
│   ├── src/
│   └── package.json
├── docker-compose.yml
├── Dockerfile.backend
└── Dockerfile.frontend
```

### 6.2 docker-compose 设计

* backend 容器：FastAPI + AkShare + AI
* frontend 容器：React 构建 + Nginx

用户操作：

```
docker compose up --build
浏览器访问：http://localhost:3000
```

---

## 七、典型用户使用流程

1. 用户启动项目：`docker compose up`
2. 打开浏览器：`http://localhost:3000`
3. 进入筛选页面
4. 选择条件或输入自然语言
5. 点击“开始筛选”
6. 系统调用 AI + AkShare
7. 返回股票列表 + 可视化图表
8. 用户点击单只股票查看详情

---

## 八、阶段性开发路线图

### 第一阶段：基础可跑通

* AkShare 数据获取
* FastAPI 接口
* 简单前端表格展示

### 第二阶段：AI 接入

* 自然语言解析
* Agent 结构设计
* 智能筛选

### 第三阶段：可视化增强

* 图表
* 交互优化
* 个股页

### 第四阶段：工程化

* 日志
* 异常处理
* 配置化

---

## 九、你这个项目在能力层面的意义（非常重要）

从能力结构上讲，你在同时锻炼：

| 能力    | 体现                   |
| ----- | -------------------- |
| 数据能力  | AkShare + 指标理解       |
| AI 能力 | Agent 设计 + Prompt 设计 |
| 工程能力  | Docker + 前后端架构       |
| 产品能力  | 用户流程 + 交互设计          |

这不是“做个小工具”，这是：

> **在训练你成为：懂金融 + 懂AI + 懂系统的人**

---

## 十、下一步建议

如果你认可这份设计，我们可以下一步直接进入：

> **“第一阶段实战拆解：如何从 0 写出 backend + AkShare 服务层”**

我可以按：

* 文件级
* 函数级
* 调用链级

一步一步带你往下走。

—— 这已经是一个“项目级工程”的起点，而不是练习题。

---

## 十一、前端产品级交互与高级视觉设计（重点增强）

> 目标：打造“专业量化 + 高端金融科技”风格的 Web 前端，而非教学型工具界面。

### 11.1 设计风格定位

| 维度 | 设计要求                                   |
| -- | -------------------------------------- |
| 色彩 | 低饱和渐变色（深蓝 / 深紫 / 深灰）                   |
| 质感 | 毛玻璃（Glassmorphism）+ 轻阴影                |
| 层级 | 卡片化 + 悬浮感                              |
| 观感 | 类似 Bloomberg / TradingView / Notion 风格 |

推荐视觉关键词：

> **冷静、专业、克制、数据感、科技感**

---

### 11.2 页面结构重构（产品级）

```
┌──────────────────────────────────────────┐
│ 顶部导航：Logo | 智能筛股 | 策略实验 | 个股分析 │
├──────────────────────────────────────────┤
│ 左侧面板（条件 + AI 输入） │ 右侧主视图区 │
│  - 指标筛选               │  - K线图      │
│  - 范围滑块               │  - 成交量     │
│  - 自然语言输入框         │  - 结果表格   │
└──────────────────────────────────────────┘
```

### 11.3 关键交互组件设计

#### 1）自然语言输入区（核心入口）

* 半透明输入框
* 支持占位提示：

  * “如：最近半年放量上涨的消费股”
  * “低估值 + 高换手 + 资金活跃”

#### 2）条件筛选区（结构化）

| 分类  | 组件      |
| --- | ------- |
| 价格  | 滑块（区间）  |
| 成交量 | 滑块      |
| 换手率 | 滑块      |
| 涨跌幅 | 下拉 + 区间 |
| 行业  | 多选 Tag  |

#### 3）结果展示区

* 上部：K 线 + 成交量 + 换手率 组合图
* 下部：股票列表表格

---

## 十二、K 线与指标可视化设计（核心能力）

### 12.1 数据来源设计（AkShare）

| 数据   | AkShare 接口                    |
| ---- | ----------------------------- |
| 历史K线 | stock_zh_a_hist               |
| 成交量  | 同上字段                          |
| 换手率  | stock_zh_a_spot_em / hist 中字段 |
| 振幅   | hist 中字段                      |

### 12.2 可视化组件设计

推荐方案：

* **ECharts**（强烈推荐）
* 或 **TradingView Lightweight Charts**

#### 图表组合结构：

```
┌──────────────────────────────┐
│         K 线主图             │
├──────────────────────────────┤
│        成交量柱状图           │
├──────────────────────────────┤
│        换手率折线图           │
└──────────────────────────────┘
```

#### 视觉要求：

* 深色背景
* 低饱和红绿
* 网格线弱化
* 悬浮 Tooltip

---

## 十三、AI + 数据联动流程设计（产品视角）

### 13.1 用户流程（真实产品级）

```
用户输入条件 / 自然语言
        ↓
前端封装请求
        ↓
后端 API 接收
        ↓
AI Agent 解析筛选逻辑
        ↓
AkShare 拉取 K线 / 成交量 / 换手率
        ↓
筛选引擎执行
        ↓
返回：股票列表 + 时间序列数据
        ↓
前端渲染 K线 + 表格 + 解释文案
```

### 13.2 AI 输出结构标准

统一要求 AI 输出：

```json
{
  "filters": [
    {"field": "volume", "operator": ">", "value": "20d_avg"},
    {"field": "turnover", "operator": ">", "value": 5},
    {"field": "price_trend", "operator": "up", "period": "30d"}
  ],
  "reasoning": "近30日放量上涨，换手率活跃，资金参与度高"
}
```

前端可直接展示 reasoning 作为“AI 解释卡片”。

---

## 十四、高级视觉实现建议（可落地）

### 14.1 毛玻璃效果（Glassmorphism）

设计要点：

* 背景：渐变 + 模糊
* 卡片：

  * background: rgba(255,255,255,0.15)
  * backdrop-filter: blur(10px)
  * border-radius: 16px

### 14.2 渐变色体系

推荐：

* 深蓝 → 深紫
* 石墨灰 → 深蓝

原则：

> **永远低饱和，永远偏冷色系**

### 14.3 动效

* 卡片 hover 浮起
* 图表加载渐入
* 切换平滑过渡

推荐库：

* Framer Motion
* GSAP

---

## 十五、产品级差异点总结（这一步非常重要）

你这个平台将同时具备：

| 维度 | 普通工具 | 你的平台       |
| -- | ---- | ---------- |
| 数据 | 静态   | 实时 AkShare |
| 交互 | 命令行  | Web 可视化    |
| 智能 | 无    | AI Agent   |
| 视觉 | 简陋   | 金融科技级      |
| 架构 | 脚本   | 平台级系统      |

这是：

> **“量化工具” → “智能投研平台” 的级别跃迁**

---

## 十六、下一步极其关键的推进建议

从工程落地角度，最优路径是：

### Step 1：先把 **K线 + 成交量 + 换手率 的前端展示跑通**

### Step 2：再接 AkShare 数据源

### Step 3：最后接 AI Agent

原因：

> **先有“形”，再有“脑”**，否则容易卡死在抽象设计。

---

如果你同意，我建议我们下一步直接进入：

> **“前端页面结构 + 组件级拆解设计（含布局示意）”**

我可以按：

* 页面级
* 组件级
* 状态流级

一步一步带你把“高级感金融前端”拆清楚。
